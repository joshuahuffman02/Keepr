@import url("https://unpkg.com/maplibre-gl@4.7.0/dist/maplibre-gl.css");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Base UI tokens (original shadcn/ui tokens) */
    --background: 210 40% 98%; /* slate-50 */
    --foreground: 222 47% 11%; /* slate-900 */
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;
    --primary: 217 91% 60%; /* blue-500 */
    --primary-foreground: 0 0% 100%;
    --secondary: 210 40% 96%; /* slate-100 */
    --secondary-foreground: 222 47% 11%;
    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%; /* slate-600 */
    --accent: 210 40% 96%;
    --accent-foreground: 222 47% 11%;
    --destructive: 0 84% 60%; /* red-500 */
    --destructive-foreground: 0 0% 100%;
    --border: 214 32% 91%; /* slate-200 */
    --input: 214 32% 91%;
    --ring: 217 91% 60%;
    --radius: 0.5rem;

    /* ============================================
       SEMANTIC COLOR TOKENS
       ============================================
       Use these tokens for consistent color usage across the app.

       ACTION TOKENS - For interactive elements (buttons, links)
       - action-primary: Main CTA buttons, primary actions
       - action-secondary: Secondary buttons, less prominent actions
       - action-hover: Hover states for primary actions

       STATUS TOKENS - For status indicators and feedback
       - status-success: Successful operations, confirmed states
       - status-warning: Warnings, balance due, attention needed
       - status-error: Errors, destructive actions, critical alerts
       - status-info: Informational messages, neutral states

       Each token has a corresponding foreground color for text.
    ============================================ */

    /* Action tokens */
    --action-primary: 158 64% 52%; /* emerald-600 */
    --action-primary-foreground: 0 0% 100%;
    --action-primary-hover: 158 64% 42%; /* emerald-700 */
    --action-secondary: 210 40% 96%; /* slate-100 */
    --action-secondary-foreground: 222 47% 11%; /* slate-900 */
    --action-secondary-hover: 214 32% 91%; /* slate-200 */

    /* Status tokens */
    --status-success: 158 64% 52%; /* emerald-600 - green for success */
    --status-success-foreground: 0 0% 100%;
    --status-success-bg: 152 57% 96%; /* emerald-50 */
    --status-success-border: 149 61% 86%; /* emerald-200 */
    --status-success-text: 160 84% 29%; /* emerald-700 - text on light bg */

    --status-warning: 38 92% 50%; /* amber-500 - amber for warnings */
    --status-warning-foreground: 21 55% 11%; /* amber-950 */
    --status-warning-bg: 48 100% 96%; /* amber-50 */
    --status-warning-border: 48 96% 76%; /* amber-200 */
    --status-warning-text: 26 90% 37%; /* amber-700 - text on light bg */

    --status-error: 0 84% 60%; /* red-500 - red for errors */
    --status-error-foreground: 0 0% 100%;
    --status-error-bg: 0 86% 97%; /* red-50 */
    --status-error-border: 0 72% 91%; /* red-200 */
    --status-error-text: 0 72% 43%; /* red-700 - text on light bg */

    --status-info: 217 91% 60%; /* blue-500 - blue for informational */
    --status-info-foreground: 0 0% 100%;
    --status-info-bg: 214 100% 97%; /* blue-50 */
    --status-info-border: 213 97% 87%; /* blue-200 */
    --status-info-text: 221 83% 45%; /* blue-700 - text on light bg */
  }

  .dark {
    /* Base UI tokens (dark mode) */
    --background: 222 47% 11%;
    --foreground: 210 40% 98%;
    --card: 217 33% 17%;
    --card-foreground: 210 40% 98%;
    --popover: 217 33% 17%;
    --popover-foreground: 210 40% 98%;
    --primary: 217 91% 60%;
    --primary-foreground: 222 47% 11%;
    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;
    --muted: 223 47% 11%;
    --muted-foreground: 215 20% 65%;
    --accent: 217 33% 17%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62% 30%;
    --destructive-foreground: 210 40% 98%;
    --border: 217 33% 17%;
    --input: 217 33% 17%;
    --ring: 217 91% 60%;

    /* Semantic tokens (dark mode) */
    --action-primary: 158 64% 52%; /* emerald-500 */
    --action-primary-foreground: 0 0% 100%;
    --action-primary-hover: 158 64% 42%; /* emerald-600 */
    --action-secondary: 217 33% 17%; /* slate-800 */
    --action-secondary-foreground: 210 40% 98%;
    --action-secondary-hover: 217 33% 23%; /* slate-700 */

    --status-success: 158 64% 52%; /* emerald-500 */
    --status-success-foreground: 0 0% 100%;
    --status-success-bg: 158 64% 12%; /* emerald-950 */
    --status-success-border: 158 64% 22%; /* emerald-800 */
    --status-success-text: 152 69% 65%; /* emerald-400 - text on dark bg */

    --status-warning: 38 92% 50%; /* amber-500 */
    --status-warning-foreground: 0 0% 100%;
    --status-warning-bg: 36 77% 12%; /* amber-950 */
    --status-warning-border: 36 86% 22%; /* amber-800 */
    --status-warning-text: 43 96% 60%; /* amber-400 - text on dark bg */

    --status-error: 0 62% 50%; /* red-600 */
    --status-error-foreground: 0 0% 100%;
    --status-error-bg: 0 62% 12%; /* red-950 */
    --status-error-border: 0 62% 22%; /* red-800 */
    --status-error-text: 0 91% 68%; /* red-400 - text on dark bg */

    --status-info: 217 91% 60%; /* blue-500 */
    --status-info-foreground: 0 0% 100%;
    --status-info-bg: 222 84% 12%; /* blue-950 */
    --status-info-border: 217 91% 22%; /* blue-800 */
    --status-info-text: 213 94% 68%; /* blue-400 - text on dark bg */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: "Inter", "Geist", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }
}

@layer utilities {
  /* Fade-in animation for onboarding hints */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  /* Accessibility utilities */

  /* Screen reader only - visually hidden but accessible to screen readers
     WCAG 2.1: 1.3.1 Info and Relationships */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Undo sr-only on focus - for skip links
     WCAG 2.1: 2.4.1 Bypass Blocks */
  .not-sr-only {
    position: static;
    width: auto;
    height: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  .focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* Respect reduced motion preferences
     WCAG 2.1: 2.3.3 Animation from Interactions */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Enhanced focus styles for better visibility
     WCAG 2.1: 2.4.7 Focus Visible */
  .focus-ring-enhanced {
    @apply focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-offset-2;
  }

  /* ============================================
     GLASSMORPHISM UTILITIES
     Matching the onboarding UI design patterns
     ============================================ */

  /* Glass background effect */
  .glass {
    @apply bg-white/80 dark:bg-slate-800/50 backdrop-blur-sm;
  }

  /* Glass with stronger blur */
  .glass-strong {
    @apply bg-white/90 dark:bg-slate-800/70 backdrop-blur-md;
  }

  /* Glass border styling */
  .glass-border {
    @apply border border-slate-200/60 dark:border-slate-700/50;
  }

  /* Combined glass card */
  .glass-card {
    @apply glass glass-border rounded-xl shadow-lg;
  }

  /* Emerald glow effect for focus/active states */
  .glow-emerald {
    box-shadow: 0 0 20px -5px rgba(16, 185, 129, 0.3);
  }

  /* Stronger emerald glow for hover */
  .glow-emerald-hover:hover {
    box-shadow: 0 0 25px -5px rgba(16, 185, 129, 0.4);
  }

  /* Focus glow matching onboarding inputs */
  .focus-glow:focus {
    box-shadow: 0 0 20px -5px rgba(16, 185, 129, 0.3);
  }

  /* Card hover glow effect */
  .hover-glow {
    @apply transition-shadow duration-300;
  }

  .hover-glow:hover {
    @apply shadow-lg shadow-emerald-500/10;
  }

  /* Gradient backgrounds */
  .gradient-emerald {
    @apply bg-gradient-to-r from-emerald-500 to-teal-500;
  }

  .gradient-emerald-hover:hover {
    @apply from-emerald-400 to-teal-400;
  }

  /* Subtle gradient overlay for cards */
  .gradient-overlay::before {
    content: "";
    @apply absolute inset-0 bg-gradient-to-br from-emerald-500/0 to-teal-500/0 transition-all rounded-xl;
  }

  .gradient-overlay:hover::before {
    @apply from-emerald-500/5 to-teal-500/5;
  }
}

/* Ensure proper focus styles are never removed */
*:focus-visible {
  outline: 2px solid currentColor;
  outline-offset: 2px;
}
